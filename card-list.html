<link rel="import" href="bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="unsecured-loan-form.html">

<polymer-element name="card-list" attributes="categoryType">
<template>
<link rel="stylesheet" href="css/palette.css">

<style>
.chip-container {
  position: relative;
  top: 8px;
  right: 0;
  left: 0;
  text-align: center;
}

.chip {
  display: inline-block;
  position: relative;
  border-radius: 3px;
  margin: 4px;
  overflow: hidden;
  text-align: start;
  background-color: #fff;
  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
}

.chip-top {
  width: 200px;
  height: 200px;
}

.chip-bottom {
  padding: 8px;
  line-height: 1.5;
}

.chip-title {
  font-weight: bold;
}

.card {
  width:100%;
  border-radius: 3px;
  text-align: start;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.card-zoom {
  padding: 24px;
}

.card-icon {
  border-radius: 50%;
  width: 60px;
  height: 60px;
  margin-right: 16px;
}

.card-title {
  font-size: 2em;
}

.contract-icon {
  height: 50%;
  width: 50%;
  margin: auto;
  position: relative;
  top: 25%;
  left: 25%;
  color: #727272;
}
</style>

<core-animated-pages selected="{{page}}" transitions="hero-transition slide-up slide-down cross-fade list-cascade" on-core-animated-pages-transition-end="{{complete}}">

<section>

        <paper-tabs class="default-primary-color" selected="0" flex>
          <paper-tab on-tap="{{tabSwitch}}" id="loans" class="text-primary-color">LOANS</paper-tab>
          <paper-tab on-tap="{{tabSwitch}}" id="payments" class="text-primary-color">PAYMENTS</paper-tab>
          <paper-tab on-tap="{{tabSwitch}}" id="derivatives" class="text-primary-color">DERIVATIVES</paper-tab>
          <paper-tab on-tap="{{tabSwitch}}" id="insurance" class="text-primary-color">INSURANCE</paper-tab>
        </paper-tabs>

  <div class="chip-container" hero-p on-tap="{{transition}}">

    <template repeat="{{items as item}}">

      <template if="{{item.type == categoryType}}">

        <div class="chip" hero-id="{{item.type}}-{{item.contract}}" hero?="{{selectedContract === item }}">
          <div class="chip-top" style="background:{{item.color}};" hero-id="{{item.type}}-{{item.contract}}-art" hero?="{{selectedContract === item}}">
            <core-icon class="contract-icon" icon="{{item.icon}}"></core-icon>
          </div>
          <div class="chip-bottom">
            <div class="chip-title">{{item.contract}}</div>
            <div class="chip-type">{{item.type}}</div>
          </div>
        </div>

      </template>

    </template>

  </div>
</section>

<section id="details">

  <div class="card" layout horizontal hero-id="{{selectedContract.type}}-{{selectedContract.contract}}" hero flex layout horizontal center>
    <div class="card-zoom" hero-id="{{selectedContract.type}}-{{selectedContract.contract}}-art" hero flex>
      <div layout horizontal center>
        <div>
          <div class="card-icon" style="background:{{selectedContract.color}};">
            <core-icon class="contract-icon secondary-text-color" style="margin: auto; position:relative; top:25%; left:25%;" icon="arrow-back" on-tap="{{transition}}"></core-icon>
          </div>
        </div>
        <div flex>
          <div class="card-title">{{selectedContract.contract}}</div>
          <div class="card-type">{{selectedContract.type}}</div>
        </div>
      </div>
      <unsecured-loan-form></unsecured-loan-form>
    </div>
  </div>

</section>

</core-animated-pages>

</template>
<script>

Polymer('card-list', {

  page: 0,

  items: [
  { type: 'Loans', contract: 'Unsecured', color: '#CFD8DC', icon: 'credit-card', form: 'unsecured-loan-form' },
  { type: 'Loans', contract: 'Secured', color: '#CFD8DC', icon: 'https'},
  { type: 'Loans', contract: 'Bond', color: '#CFD8DC', icon: 'receipt' },
  { type: 'Loans', contract: 'IR Swap', color: '#CFD8DC', icon: 'swap-horiz' },
  { type: 'Loans', contract: 'Custom', color: '#CFD8DC', icon: 'add' },
  { type: 'Payments', contract: 'P2SH Multisignature', color: '#CFD8DC', icon: 'add' },
  { type: 'Payments', contract: 'Pay-to-Contract-Hash', color: '#CFD8DC', icon: 'add' },
  { type: 'Payments', contract: 'Custom', color: '#CFD8DC', icon: 'add' },
  { type: 'Derivatives', contract: 'Custom', color: '#CFD8DC', icon: 'add' },
  { type: 'Insurance', contract: 'Custom', color: '#CFD8DC', icon: 'add' }
  ],

  selectedContract: null,

  tabSwitch: function(e, index) {
    switch (e.srcElement.id) {
      case 'loans':
        this.categoryType = 'Loans';
        break;
      case 'payments':
        this.categoryType = 'Payments';
        break;
      case 'derivatives':
        this.categoryType = 'Derivatives';
        break;
      case 'insurance':
        this.categoryType = 'Insurance';
        break;
    }
  },

  transition: function(e) {
    if (this.page === 0 && e.target.templateInstance.model.item) {
      this.selectedContract = e.target.templateInstance.model.item;
      this.page = 1;
    } else {
      this.page = 0;
    }
  }
});

</script>
</polymer-element>
